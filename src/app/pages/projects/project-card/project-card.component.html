<div class="gallery-container">
  <!-- პროექტების ჩვენება -->
  <div class="projects-grid">
    <div *ngFor="let project of displayedProjects; trackBy: trackByProjectId" class="project-card"
      (click)="openModal(project)">
      <div class="card-image-wrapper">
        <img [src]="project.images[0]" [alt]="project.name + ' image'" class="thumbnail">
        <div class="hover-overlay">
          <span class="view-project">ნახეთ პროექტი</span>
        </div>
      </div>
      <h3>{{ project.name }}</h3>
      <p>{{ project.description }}</p>
    </div>
  </div>

  <!-- პაგინაცია -->
  <app-pagination [currentPage]="currentPage" [totalPages]="totalPages" [maxButtons]="maxPaginationButtons"
    (pageChange)="onPageChange($event)">
  </app-pagination>

  <!-- მოდალი (სურათების ნახვა) -->
  <div *ngIf="selectedProject" class="modal" (click)="closeModal()">
    <div class="modal-content" (click)="$event.stopPropagation()">
      <button class="close-btn" (click)="closeModal()">
        <i class="bi bi-x-lg"></i>
      </button>

      <div class="modal-header">
        <h3 class="modal-title">{{ selectedProject.name }}</h3>
        <p class="modal-description">{{ selectedProject.description }}</p>
      </div>

      <div class="carousel-container">
        <div class="image-showcase">
          <div class="image-container">
            <img [src]="selectedProject.images[currentImageIndex]" [alt]="selectedProject.name + ' image'"
              class="featured-image">
          </div>

          <button class="nav-button prev" (click)="prevImage()" [disabled]="currentImageIndex === 0">
            <div class="arrow-icon left-arrow">
              <div class="arrow-line"><i class="bi bi-chevron-left"></i></div>
              <div class="arrow-head"></div>
            </div>
          </button>

          <button class="nav-button next" (click)="nextImage()"
            [disabled]="currentImageIndex === selectedProject.images.length - 1">
            <div class="arrow-icon right-arrow">
              <div class="arrow-line"><i class="bi bi-chevron-right"></i></div>
              <div class="arrow-head"></div>
            </div>
          </button>
        </div>

        <div class="carousel-controls">
          <div class="image-counter">
            <span class="current-index">{{ currentImageIndex + 1 }}</span>
            <span class="total-divider">/</span>
            <span class="total-images">{{ selectedProject.images.length }}</span>
          </div>

          <!-- Thumbnails -->
          <div class="thumbnails-gallery" *ngIf="selectedProject.images.length > 1">
            <div *ngFor="let image of selectedProject.images; let i = index" class="thumbnail-item"
              [class.active]="i === currentImageIndex" (click)="selectThumbnail(i)">
              <div class="thumbnail-frame">
                <img [src]="image" [alt]="selectedProject.name + ' thumbnail ' + (i + 1)">
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>